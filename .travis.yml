sudo: false

language: cpp

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    - kalakris-cmake
    packages:
    - cmake
    - gcc-4.8
    - g++-4.8
    - clang

compiler:
  - gcc
  - clang

os:
  - linux
  - osx

env:
  - BUILD_TYPE=Debug
  - BUILD_TYPE=Release

notifications:
  email:
    on_success: never
    on_failure: never

cache: apt

install:
  - if [ "$CXX" = "g++" ]; then export CXX="g++-4.8" CC="gcc-4.8"; fi
  - BUILD_DIR=$PWD/builds
  - mkdir -p ${BUILD_DIR}
  - cd ${BUILD_DIR}
  - cmake -DCMAKE_BUILD_TYPE=$BUILD_TYPE ..
  - cd ${BUILD_DIR}
  - make

before_script:
  # verify installed versions
  - which cmake
  - cmake --version
  - which g++
  - g++ -v
  - which g++-4.8
  - g++-4.8 -v
  - which clang
  - clang -v

script:
  # build and test
  - ctest -V

# deploy:
#   provider: releases
#   api-key: "GITHUB OAUTH TOKEN"
#   file:
#     - "FILE 1"
#     - "FILE 2"
#   skip_cleanup: true
#   on:
#     tags: true
